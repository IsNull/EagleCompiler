<program>
  terminal PROGRAM
    PROGRAM IDENT <optGlobalCpsDecl> <blockCmd>
<optGlobalCpsDecl>
  terminal GLOBAL
    GLOBAL <cpsDecl>
  terminal LBRACE
    
<decl>
  terminal IDENT
    <storeDecl>
  terminal CHANGEMODE
    <storeDecl>
  terminal FUN
    <funDecl>
  terminal PROC
    <procDecl>
<storeDecl>
  terminal CHANGEMODE
    CHANGEMODE IDENT COLON TYPE
  terminal IDENT
    IDENT COLON TYPE
<funDecl>
  terminal FUN
    FUN IDENT <paramList> RETURNS <storeDecl> <optGlobImpList> <optLocalCpsDecl> <blockCmd>
<optGlobImpList>
  terminal GLOBAL
    GLOBAL <globImplList>
  terminal LBRACE
    
  terminal LOCAL
    
<optLocalCpsDecl>
  terminal LOCAL
    LOCAL <cpsDecl>
  terminal LBRACE
    
<procDecl>
  terminal PROC
    PROC IDENT <paramList> <optGlobImpList> <optLocalCpsDecl> <blockCmd>
<cpsDecl>
  terminal PROC
    <decl> <repDecl>
  terminal FUN
    <decl> <repDecl>
  terminal IDENT
    <decl> <repDecl>
  terminal CHANGEMODE
    <decl> <repDecl>
<repDecl>
  terminal SEMICOLON
    SEMICOLON <decl> <repDecl>
  terminal LBRACE
    
<paramList>
  terminal LPAREN
    LPAREN <optParam> RPAREN
<optParam>
  terminal IDENT
    <param> <repParam>
  terminal CHANGEMODE
    <param> <repParam>
  terminal MECHMODE
    <param> <repParam>
  terminal FLOWMODE
    <param> <repParam>
  terminal RPAREN
    
<repParam>
  terminal COMMA
    COMMA <repParam>
  terminal RPAREN
    
<param>
  terminal IDENT
    <optFlowMode> <optMechMode> <storeDecl>
  terminal CHANGEMODE
    <optFlowMode> <optMechMode> <storeDecl>
  terminal MECHMODE
    <optFlowMode> <optMechMode> <storeDecl>
  terminal FLOWMODE
    <optFlowMode> <optMechMode> <storeDecl>
<optFlowMode>
  terminal FLOWMODE
    FLOWMODE
  terminal IDENT
    
  terminal CHANGEMODE
    
  terminal MECHMODE
    
<optMechMode>
  terminal MECHMODE
    MECHMODE
  terminal IDENT
    
  terminal CHANGEMODE
    
<globImplList>
  terminal IDENT
    <globImp> <repGlobImp>
  terminal CHANGEMODE
    <globImp> <repGlobImp>
  terminal FLOWMODE
    <globImp> <repGlobImp>
<repGlobImp>
  terminal COMMA
    COMMA <globImp> <repGlobImp>
  terminal LBRACE
    
  terminal LOCAL
    
<globImp>
  terminal IDENT
    <optFlowMode> <optChangeMode> IDENT
  terminal CHANGEMODE
    <optFlowMode> <optChangeMode> IDENT
  terminal FLOWMODE
    <optFlowMode> <optChangeMode> IDENT
<optChangeMode>
  terminal CHANGEMODE
    CHANGEMODE
  terminal IDENT
    
<cmd>
  terminal SKIP
    SKIP
  terminal LPAREN
    <expr> BECOMES <expr>
  terminal ADDOPR
    <expr> BECOMES <expr>
  terminal NOT
    <expr> BECOMES <expr>
  terminal IDENT
    <expr> BECOMES <expr>
  terminal LITERAL
    <expr> BECOMES <expr>
  terminal IF
    IF LPAREN <expr> RPAREN <blockCmd> ELSE <blockCmd>
  terminal WHILE
    WHILE LPAREN <expr> RPAREN <blockCmd>
  terminal CALL
    CALL IDENT <exprList> <optGlobInitList>
  terminal QUESTMARK
    QUESTMARK <expr>
  terminal EXCLAMARK
    EXCLAMARK <expr>
<optGlobInitList>
  terminal INIT
    INIT <globInitList>
  terminal RBRACE
    
  terminal SEMICOLON
    
<blockCmd>
  terminal LBRACE
    LBRACE <cmd> <repCmd> RBRACE
<repCmd>
  terminal SEMICOLON
    SEMICOLON <cmd> <repCmd>
  terminal RBRACE
    
<globInitList>
  terminal IDENT
    IDENT <repIdent>
<repIdent>
  terminal COMMA
    COMMA IDENT <repIdent>
  terminal RBRACE
    
  terminal SEMICOLON
    
<expr>
  terminal LPAREN
    <term1> <repBoolOprTerm1>
  terminal ADDOPR
    <term1> <repBoolOprTerm1>
  terminal NOT
    <term1> <repBoolOprTerm1>
  terminal IDENT
    <term1> <repBoolOprTerm1>
  terminal LITERAL
    <term1> <repBoolOprTerm1>
<repBoolOprTerm1>
  terminal BOOLOPR
    BOOLOPR <term1> <repBoolOprTerm1>
  terminal COMMA
    
  terminal RPAREN
    
  terminal RBRACE
    
  terminal SEMICOLON
    
  terminal BECOMES
    
<term1>
  terminal LPAREN
    <term2> <optRelOprTerm2>
  terminal ADDOPR
    <term2> <optRelOprTerm2>
  terminal NOT
    <term2> <optRelOprTerm2>
  terminal IDENT
    <term2> <optRelOprTerm2>
  terminal LITERAL
    <term2> <optRelOprTerm2>
<optRelOprTerm2>
  terminal RELOPR
    RELOPR <term2>
  terminal COMMA
    
  terminal RPAREN
    
  terminal RBRACE
    
  terminal SEMICOLON
    
  terminal BECOMES
    
  terminal BOOLOPR
    
<term2>
  terminal LPAREN
    <term3> <repAddOprTerm3>
  terminal ADDOPR
    <term3> <repAddOprTerm3>
  terminal NOT
    <term3> <repAddOprTerm3>
  terminal IDENT
    <term3> <repAddOprTerm3>
  terminal LITERAL
    <term3> <repAddOprTerm3>
<repAddOprTerm3>
  terminal ADDOPR
    ADDOPR <term3> <repAddOprTerm3>
  terminal COMMA
    
  terminal RPAREN
    
  terminal RBRACE
    
  terminal SEMICOLON
    
  terminal BECOMES
    
  terminal BOOLOPR
    
  terminal RELOPR
    
<term3>
  terminal LPAREN
    <factor> <repMultOprFactor>
  terminal ADDOPR
    <factor> <repMultOprFactor>
  terminal NOT
    <factor> <repMultOprFactor>
  terminal IDENT
    <factor> <repMultOprFactor>
  terminal LITERAL
    <factor> <repMultOprFactor>
<repMultOprFactor>
  terminal MULTOPR
    MULTOPR <factor> <repMultOprFactor>
  terminal COMMA
    
  terminal RPAREN
    
  terminal RBRACE
    
  terminal SEMICOLON
    
  terminal BECOMES
    
  terminal BOOLOPR
    
  terminal RELOPR
    
  terminal ADDOPR
    
<factor>
  terminal LITERAL
    LITERAL
  terminal IDENT
    IDENT
  terminal ADDOPR
    <monadicOpr> <factor>
  terminal NOT
    <monadicOpr> <factor>
  terminal LPAREN
    LPAREN <expr> RPAREN
<exprList>
  terminal LPAREN
    LPAREN <optExpr> RPAREN
<optExpr>
  terminal LPAREN
    <expr> <repExpr>
  terminal ADDOPR
    <expr> <repExpr>
  terminal NOT
    <expr> <repExpr>
  terminal IDENT
    <expr> <repExpr>
  terminal LITERAL
    <expr> <repExpr>
  terminal RPAREN
    
<repExpr>
  terminal COMMA
    COMMA <expr> <repExpr>
  terminal RPAREN
    
<monadicOpr>
  terminal NOT
    NOT
  terminal ADDOPR
    ADDOPR
